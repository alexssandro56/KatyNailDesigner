"use strict";(()=>{var e={};e.id=538,e.ids=[538],e.modules={20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},92824:e=>{e.exports=require("next/server")},23745:e=>{e.exports=import("firebase/app")},1492:e=>{e.exports=import("firebase/firestore")},56249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},7481:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>p,default:()=>u,routeModule:()=>c});var o=a(71802),n=a(47153),s=a(56249),i=a(62415),d=e([i]);i=(d.then?(await d)():d)[0];let u=(0,s.l)(i,"default"),p=(0,s.l)(i,"config"),c=new o.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/webhook",pathname:"/api/webhook",bundlePath:"",filename:""},userland:i});r()}catch(e){r(e)}})},34950:(e,t,a)=>{a.a(e,async(e,r)=>{try{let i;a.d(t,{db:()=>u});var o=a(23745),n=a(1492),s=e([o,n]);[o,n]=s.then?(await s)():s;let d={apiKey:"AIzaSyAT9yeUR8dCpKbksRvHkcpgQ3fnJYX_yXU",authDomain:"meu-salao-de-beleza-de96e.firebaseapp.com",databaseURL:process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL,projectId:"meu-salao-de-beleza-de96e",storageBucket:"meu-salao-de-beleza-de96e.appspot.com",messagingSenderId:"168401795517",appId:"1:168401795517:web:155126b89a3e9c2ec37ad4",measurementId:"G-W2NV1442GG"};try{i=(0,o.getApp)()}catch{i=(0,o.initializeApp)(d)}let u=(0,n.getFirestore)(i);r()}catch(e){r(e)}})},62415:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{POST:()=>d});var o=a(92824),n=a(1492),s=a(34950),i=e([n,s]);async function d(e){try{let t=await e.json();if(console.log("\uD83D\uDD14 Webhook recebido:",t),!t||!t.data||!t.type)return o.NextResponse.json({error:"Webhook sem dados v\xe1lidos"},{status:400});t.data.id;let a=t.data.status,r=t.data.external_reference;if(!r)return o.NextResponse.json({error:"Webhook ignorado, ID ausente"},{status:400});let i=(0,n.doc)(s.db,"agendamentos",r);return await (0,n.updateDoc)(i,{status:a}),console.log(`✅ Agendamento ${r} atualizado para: ${a}`),o.NextResponse.json({success:!0})}catch(e){return console.error("❌ Erro no Webhook:",e),o.NextResponse.json({error:"Erro ao processar webhook"},{status:500})}}[n,s]=i.then?(await i)():i,r()}catch(e){r(e)}})},47153:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},71802:(e,t,a)=>{e.exports=a(20145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=t(t.s=7481);module.exports=a})();